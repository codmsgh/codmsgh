<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />

<!-- â­ ëª¨ë°”ì¼ í•„ìˆ˜ -->
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>íƒ€ì´ì¿¤ í´ë¦­ì»¤</title>

<style>
/* ===== ê¸°ë³¸ ===== */
*{
 box-sizing:border-box;
 -webkit-tap-highlight-color:transparent;
}

body{
 margin:0;
 background:linear-gradient(135deg,#1e1e2f,#2b2b45);
 font-family:sans-serif;
 color:white;
 display:flex;
 justify-content:center;
}

/* ===== ì•± ì»¨í…Œì´ë„ˆ (ë°˜ì‘í˜• í•µì‹¬) ===== */
#wrap{
 width:100%;
 max-width:500px;   /* PCì—ì„œ ë„ˆë¬´ ë„“ì–´ì§€ì§€ ì•Šê²Œ */
 min-height:100vh;
 padding:12px;
}

/* ===== ìƒë‹¨ ëˆë°” ===== */
.topbar{
 position:sticky;
 top:0;
 background:#2a2a40;
 padding:14px;
 border-radius:14px;
 font-size:20px;
 font-weight:bold;
 text-align:center;
 margin-bottom:10px;
 z-index:10;
}

/* ===== ì¹´ë“œ ===== */
.panel{
 background:rgba(50,50,80,0.95);
 padding:14px;
 margin-bottom:10px;
 border-radius:14px;
}

/* ===== ë²„íŠ¼ (ëª¨ë°”ì¼ í¬ê²Œ) ===== */
button{
 width:100%;
 padding:14px;
 margin:6px 0;
 font-size:16px;
 border:none;
 border-radius:12px;
 background:#4a7dff;
 color:white;
 font-weight:bold;
 cursor:pointer;
}

button:active{
 transform:scale(0.96);
}

.resetBtn{
 background:#ff5c5c;
}

/* ===== ë§¤ì¥ ===== */
.store{
 position:relative;
 height:220px;
 border-radius:12px;
 overflow:hidden;
 border:2px solid #777;
 margin-top:10px;
}

.convenience{ background:linear-gradient(#fefefe,#d4d4f0); }
.cafe{ background:linear-gradient(#f3e5ab,#cfae87); }
.pcroom{ background:linear-gradient(#a8d0e6,#374785); }

.floor{
 position:absolute;
 bottom:0;
 width:100%;
 height:40px;
 background:#ccc4;
}

.worker{
 position:absolute;
 bottom:10px;
 font-size:26px;
 animation:walk 18s linear infinite;
}

@keyframes walk{
 0%{left:-40px;}
 100%{left:100%;}
}

.customer{
 position:absolute;
 bottom:50px;
 font-size:22px;
 left:-40px;
 transition:left 2s linear;
}

/* ===== ê²Œì´ì§€ ===== */
.gaugeBox{
 height:18px;
 background:#222;
 border-radius:10px;
 overflow:hidden;
 margin:6px 0;
}
.gauge{
 height:100%;
 background:#4aff7d;
 width:0%;
}

/* ===== ì§‘ ===== */
.house{
 position:relative;
 height:300px;
 border-radius:12px;
 background:linear-gradient(#c69c6d,#f0e0d6);
 overflow:hidden;
}

.houseItem{
 position:absolute;
 font-size:32px;
 cursor:grab;
}

/* ===== ëª¨ë°”ì¼ ê¸€ì í™•ëŒ€ ===== */
@media (max-width:480px){
 button{ font-size:17px; }
}
</style>
</head>

<body>
<div id="wrap">

<div class="topbar">ğŸ’° ëˆ: <span id="money">0</span></div>
<div id="app"></div>

</div>

<script>
/* ================= ì €ì¥ ================= */
const SAVE="tycoon_save";

function setC(n,v){
 document.cookie=n+"="+encodeURIComponent(JSON.stringify(v))+";path=/;max-age=31536000";
}
function getC(n){
 let m=document.cookie.match('(^|;)\\s*'+n+'=([^;]+)');
 return m?JSON.parse(decodeURIComponent(m[2])):null;
}
function delC(n){
 document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;";
}

let data=getC(SAVE)||{
 money:0,
 houseItems:[],
 shops:[
  {name:"ğŸª í¸ì˜ì ",unlock:0,owned:true,click:0,workers:0,furn:[]},
  {name:"â˜• ì¹´í˜",unlock:700,owned:false,click:0,workers:0,furn:[]},
  {name:"ğŸ–¥ PCë°©",unlock:2400,owned:false,click:0,workers:0,furn:[]}
 ]
};

const CLICK_MAX=5;
const SHOP_FURN=[
 {emoji:"ğŸª‘",cost:30,auto:5},
 {emoji:"ğŸ–¥",cost:50,auto:10},
 {emoji:"ğŸ’¡",cost:80,auto:20}
];

function save(){
 setC(SAVE,data);
 money.textContent=data.money;
}

/* ================= ìë™ ìˆ˜ìµ ================= */
setInterval(()=>{
 data.shops.forEach(s=>{
  if(!s.owned) return;
  let auto=s.workers*2;
  s.furn.forEach(i=>auto+=SHOP_FURN[i].auto);
  data.money+=auto;
 });
 save();
},1000);

/* ================= í™ˆ ================= */
function renderHome(){
 app.innerHTML="";

 data.shops.forEach((s,i)=>{
  let b=document.createElement("button");
  b.textContent=s.owned?`${s.name} ì…ì¥`:`ğŸ”’ ${s.name} (${s.unlock}ì›)`;
  b.onclick=()=>s.owned?enter(i):unlock(i);
  app.appendChild(b);
 });

 let h=document.createElement("button");
 h.textContent="ğŸ  ì§‘ ê¾¸ë¯¸ê¸°";
 h.onclick=renderHouse;
 app.appendChild(h);

 let r=document.createElement("button");
 r.textContent="ğŸ”„ ì „ì²´ ì´ˆê¸°í™”";
 r.className="resetBtn";
 r.onclick=()=>{delC(SAVE);location.reload();}
 app.appendChild(r);
}

/* ================= ë§¤ì¥ ================= */
function unlock(i){
 let s=data.shops[i];
 if(data.money<s.unlock) return;
 data.money-=s.unlock;
 s.owned=true;
 renderHome();
}

function enter(i){
 let s=data.shops[i];
 let cls=["convenience","cafe","pcroom"][i];

 app.innerHTML=`
 <div class="panel">
 <h3>${s.name}</h3>
 í´ë¦­ ${s.click}/${CLICK_MAX}
 <div class="gaugeBox"><div id="g" class="gauge"></div></div>
 <button onclick="clickShop(${i})">í™ë³´í•˜ê¸°</button>
 <button onclick="hire(${i})">ì§ì› ê³ ìš© (${(s.workers+1)*10})</button>
 <button onclick="renderHome()">í™ˆ</button>
 <div class="store ${cls}" id="store"><div class="floor"></div></div>
 `;

 drawWorkers(s);
 updateGauge(s);
}

function clickShop(i){
 let s=data.shops[i];
 s.click++;
 if(s.click>=CLICK_MAX){
  s.click=0;
  spawnCustomer();
 }
 updateGauge(s);
}

function updateGauge(s){
 let g=document.getElementById("g");
 if(g) g.style.width=(s.click/CLICK_MAX*100)+"%";
}

function spawnCustomer(){
 let box=document.getElementById("store");
 let c=document.createElement("span");
 c.className="customer";
 c.textContent="ğŸ§";
 box.appendChild(c);
 setTimeout(()=>c.style.left="70%",10);
 setTimeout(()=>{data.money++;c.remove();save();},2000);
}

function hire(i){
 let s=data.shops[i];
 let cost=(s.workers+1)*10;
 if(data.money<cost) return;
 data.money-=cost;
 s.workers++;
 enter(i);
}

function drawWorkers(s){
 let box=document.getElementById("store");
 for(let w=0;w<s.workers;w++){
  let e=document.createElement("span");
  e.className="worker";
  e.textContent="ğŸ‘·";
  e.style.bottom=(10+w*20)+"px";
  box.appendChild(e);
 }
}

/* ================= ì§‘ ================= */
function renderHouse(){
 app.innerHTML=`
 <div class="panel">
 <h3>ğŸ  ì§‘</h3>
 <button onclick="renderHome()">í™ˆ</button>
 <div class="house" id="house"></div>
 </div>
 `;
}

/* ì‹œì‘ */
renderHome();
save();
</script>
</body>
</html>
