<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ğŸ° ê°€ìœ„ë°”ìœ„ë³´ ì¹´ì§€ë…¸</title>

<style>
body{
  font-family: Arial;
  text-align:center;
  background:#111;
  color:white;
  padding:20px;
}

button{
  padding:10px 18px;
  margin:5px;
  font-size:15px;
  cursor:pointer;
}

.betBtn{ background:#333; color:white; }
.rpsBtn{ background:#ff9800; color:black; font-weight:bold; }

#log{
  margin-top:20px;
  height:200px;
  overflow-y:auto;
  background:#222;
  padding:10px;
  border-radius:10px;
  text-align:left;
}
</style>
</head>
<body>

<h1>ğŸ° ê°€ìœ„ë°”ìœ„ë³´ ì¹´ì§€ë…¸</h1>

<h2>
ğŸ’° ëˆ: <span id="money">1000</span> |
ğŸ”¥ ì—°ìŠ¹: <span id="streak">0</span> |
ğŸ¯ ìŠ¹ë¥ : <span id="chance">50</span>%
</h2>

<h3>ğŸ’µ ë² íŒ… ì„ íƒ</h3>
<div id="betButtons"></div>

<h3>âœŠ ì„ íƒ</h3>
<button class="rpsBtn" onclick="play('ê°€ìœ„')">ê°€ìœ„</button>
<button class="rpsBtn" onclick="play('ë°”ìœ„')">ë°”ìœ„</button>
<button class="rpsBtn" onclick="play('ë³´')">ë³´</button>

<div id="log"></div>

<script>
let money = Number(localStorage.getItem("money")) || 1000;
let streak = 0;
let currentBet = 100;
let choices = ["ê°€ìœ„","ë°”ìœ„","ë³´"];
let moneyEl = document.getElementById("money");
let streakEl = document.getElementById("streak");
let chanceEl = document.getElementById("chance");
let log = document.getElementById("log");
let betArea = document.getElementById("betButtons");

// ë² íŒ… ë²„íŠ¼ ìƒì„±
for(let i=100;i<=2000;i+=100){ createBetBtn(i); }
createBetBtn("ì˜¬ì¸");

function createBetBtn(value){
  let btn = document.createElement("button");
  btn.className="betBtn";
  btn.innerText=value;
  btn.onclick = ()=>{
    currentBet = (value==="ì˜¬ì¸")? money : value;
    addLog("ğŸ’µ ë² íŒ… ì„ íƒ: "+currentBet);
  }
  betArea.appendChild(btn);
}

// ìŠ¹ë¥  ê³„ì‚°
function getWinChance(){
  if(money>=10000) return 25;
  if(money>=5000) return 35;
  if(money>=2000) return 45;
  return 50;
}

// í™”ë©´ ì—…ë°ì´íŠ¸
function update(){
  moneyEl.innerText = money;
  streakEl.innerText = streak;
  chanceEl.innerText = getWinChance();
  localStorage.setItem("money", money);
}

// ë¡œê·¸
function addLog(text){
  log.innerHTML += text+"<br>";
  log.scrollTop = log.scrollHeight;
}

// ê²Œì„ ì‹¤í–‰
function play(player){
  if(currentBet>money){ alert("ëˆ ë¶€ì¡±!"); return; }

  let computer = choices[Math.floor(Math.random()*3)];
  let chance = getWinChance();

  // ğŸ² ê¸°ëŒ€ê° í‘œì‹œ
  addLog(`${player} ì„ íƒ! ì»´í“¨í„° ì„ íƒ ì¤‘...`);
  disableButtons(true);

  setTimeout(()=>{
    let roll = Math.random()*100;
    let result;

    if(roll<chance) result="win";
    else result="lose";

    if(Math.random()<0.1) result="draw"; // 10% ë¬´ìŠ¹ë¶€

    let multiplier=2;
    if(streak>=2) multiplier=3;
    if(streak>=5) multiplier=5;

    if(result==="win"){
      let gain = currentBet*multiplier;
      streak++;
      if(streak%3===0){ gain+=500; addLog("ğŸ‰ 3ì—°ìŠ¹ ë³´ë„ˆìŠ¤ +500"); }
      money+=gain;
      addLog(`âœ… ${player} vs ${computer} â†’ ìŠ¹ë¦¬! +${gain} (ë°°ìœ¨ x${multiplier})`);
    }
    else if(result==="lose"){
      money-=currentBet;
      streak=0;
      addLog(`âŒ ${player} vs ${computer} â†’ íŒ¨ë°°... -${currentBet}`);
    }
    else{
      addLog(`â– ${player} vs ${computer} â†’ ë¬´ìŠ¹ë¶€`);
    }

    if(money<=0){ alert("ğŸ’€ íŒŒì‚°! ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤."); money=1000; streak=0; }

    update();
    disableButtons(false);

  }, 2000); // 2ì´ˆ ê¸°ë‹¤ë¦¼
}

// ë²„íŠ¼ ë¹„í™œì„±í™”
function disableButtons(flag){
  document.querySelectorAll(".rpsBtn").forEach(b=>b.disabled=flag);
  document.querySelectorAll(".betBtn").forEach(b=>b.disabled=flag);
}

update();
</script>
</body>
</html>
